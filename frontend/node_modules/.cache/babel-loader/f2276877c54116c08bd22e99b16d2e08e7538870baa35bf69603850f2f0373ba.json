{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import toast from'../../utils/toast';import{fromNow}from'../../utils/dateUtils';import Sidebar from'./Sidebar';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Notifications=()=>{const navigate=useNavigate();const user=JSON.parse(localStorage.getItem('user')||'null');const role=(user===null||user===void 0?void 0:user.type)==='admin'?'admin':user!==null&&user!==void 0&&user.isdoctor?'doctor':'user';const[notifications,setNotifications]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{fetchNotifs();},[]);// eslint-disable-line\nconst fetchNotifs=async()=>{try{const token=localStorage.getItem('token');const res=await axios.get('/api/user/notifications',{headers:{Authorization:\"Bearer \".concat(token)}});if(res.data.success)setNotifications(res.data.data||[]);}catch(_unused){toast.error('Failed to load notifications');}finally{setLoading(false);}};const markAllRead=async()=>{try{const token=localStorage.getItem('token');await axios.put('/api/user/notifications/mark-read',{},{headers:{Authorization:\"Bearer \".concat(token)}});setNotifications([]);toast.success('All notifications cleared');}catch(_unused2){toast.error('Failed to clear notifications');}};const iconFor=function(){let type=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';if(type.includes('approved'))return{icon:'‚úÖ',color:'var(--success)',bg:'rgba(16,185,129,0.10)'};if(type.includes('rejected'))return{icon:'‚ùå',color:'var(--danger)',bg:'rgba(244,63,94,0.10)'};if(type.includes('cancelled'))return{icon:'üö´',color:'var(--warning)',bg:'rgba(245,158,11,0.10)'};if(type.includes('new'))return{icon:'üîî',color:'var(--primary)',bg:'rgba(14,165,233,0.10)'};return{icon:'üí¨',color:'var(--accent)',bg:'rgba(167,139,250,0.10)'};};return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-layout\",children:[/*#__PURE__*/_jsx(Sidebar,{role:role,notifCount:notifications.length}),/*#__PURE__*/_jsxs(\"main\",{className:\"dashboard-main\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-header\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'space-between',flexWrap:'wrap',gap:'1rem'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-greeting\",children:\"Notifications \\uD83D\\uDD14\"}),/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-subline\",children:\"Stay updated on your appointments and requests\"})]}),notifications.length>0&&/*#__PURE__*/_jsx(\"button\",{className:\"btn-3d btn-secondary-3d\",onClick:markAllRead,children:\"\\u2713 Mark all as read\"})]})}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-3d\"})}):notifications.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"glass-card\",style:{padding:'4rem 2rem',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'3.5rem',marginBottom:'1rem'},children:\"\\uD83C\\uDF89\"}),/*#__PURE__*/_jsx(\"h3\",{style:{fontFamily:'Syne,sans-serif',fontSize:'1.2rem',color:'var(--text-primary)',marginBottom:'0.5rem'},children:\"You're all caught up!\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--text-secondary)',fontSize:'0.9rem'},children:\"No new notifications right now.\"})]}):/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',gap:'0.8rem'},children:notifications.map((n,i)=>{const{icon,color,bg}=iconFor(n.type||'');return/*#__PURE__*/_jsxs(\"div\",{className:\"glass-card\",style:{padding:'1.2rem 1.5rem',display:'flex',alignItems:'flex-start',gap:'1rem',cursor:n.onClickPath?'pointer':'default'},onClick:()=>n.onClickPath&&navigate(n.onClickPath),children:[/*#__PURE__*/_jsx(\"div\",{style:{width:42,height:42,borderRadius:12,background:bg,display:'flex',alignItems:'center',justifyContent:'center',fontSize:'1.2rem',flexShrink:0},children:icon}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'0.9rem',color:'var(--text-primary)',marginBottom:'0.3rem',lineHeight:1.5},children:n.message}),n.createdAt&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'0.75rem',color:'var(--text-muted)'},children:fromNow(n.createdAt)})]}),n.onClickPath&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'0.8rem',color,fontWeight:500},children:\"View \\u2192\"})]},i);})})]})]});};export default Notifications;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","toast","fromNow","Sidebar","jsx","_jsx","jsxs","_jsxs","Notifications","navigate","user","JSON","parse","localStorage","getItem","role","type","isdoctor","notifications","setNotifications","loading","setLoading","fetchNotifs","token","res","get","headers","Authorization","concat","data","success","_unused","error","markAllRead","put","_unused2","iconFor","arguments","length","undefined","includes","icon","color","bg","className","children","notifCount","style","display","alignItems","justifyContent","flexWrap","gap","onClick","padding","textAlign","fontSize","marginBottom","fontFamily","flexDirection","map","n","i","cursor","onClickPath","width","height","borderRadius","background","flexShrink","flex","lineHeight","message","createdAt","fontWeight"],"sources":["C:/Users/Dell/Downloads/docspot-appointment-booking/docspot-appointment-booking/frontend/src/components/common/Notifications.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport toast from '../../utils/toast';\nimport { fromNow } from '../../utils/dateUtils';\nimport Sidebar from './Sidebar';\n\nconst Notifications = () => {\n  const navigate = useNavigate();\n  const user     = JSON.parse(localStorage.getItem('user') || 'null');\n  const role     = user?.type === 'admin' ? 'admin' : user?.isdoctor ? 'doctor' : 'user';\n\n  const [notifications, setNotifications] = useState([]);\n  const [loading, setLoading]             = useState(true);\n\n  useEffect(() => { fetchNotifs(); }, []); // eslint-disable-line\n\n  const fetchNotifs = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const res   = await axios.get('/api/user/notifications', {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (res.data.success) setNotifications(res.data.data || []);\n    } catch { toast.error('Failed to load notifications'); }\n    finally   { setLoading(false); }\n  };\n\n  const markAllRead = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      await axios.put('/api/user/notifications/mark-read', {}, {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      setNotifications([]);\n      toast.success('All notifications cleared');\n    } catch { toast.error('Failed to clear notifications'); }\n  };\n\n  const iconFor = (type = '') => {\n    if (type.includes('approved'))  return { icon: '‚úÖ', color: 'var(--success)',  bg: 'rgba(16,185,129,0.10)' };\n    if (type.includes('rejected'))  return { icon: '‚ùå', color: 'var(--danger)',   bg: 'rgba(244,63,94,0.10)'  };\n    if (type.includes('cancelled')) return { icon: 'üö´', color: 'var(--warning)',  bg: 'rgba(245,158,11,0.10)' };\n    if (type.includes('new'))       return { icon: 'üîî', color: 'var(--primary)',  bg: 'rgba(14,165,233,0.10)' };\n    return                                 { icon: 'üí¨', color: 'var(--accent)',   bg: 'rgba(167,139,250,0.10)'};\n  };\n\n  return (\n    <div className=\"dashboard-layout\">\n      <Sidebar role={role} notifCount={notifications.length} />\n\n      <main className=\"dashboard-main\">\n        <div className=\"dashboard-header\">\n          <div style={{ display:'flex', alignItems:'center', justifyContent:'space-between', flexWrap:'wrap', gap:'1rem' }}>\n            <div>\n              <div className=\"dashboard-greeting\">Notifications üîî</div>\n              <div className=\"dashboard-subline\">Stay updated on your appointments and requests</div>\n            </div>\n            {notifications.length > 0 && (\n              <button className=\"btn-3d btn-secondary-3d\" onClick={markAllRead}>\n                ‚úì Mark all as read\n              </button>\n            )}\n          </div>\n        </div>\n\n        {loading ? (\n          <div className=\"loading-center\"><div className=\"spinner-3d\" /></div>\n        ) : notifications.length === 0 ? (\n          <div className=\"glass-card\" style={{ padding:'4rem 2rem', textAlign:'center' }}>\n            <div style={{ fontSize:'3.5rem', marginBottom:'1rem' }}>üéâ</div>\n            <h3 style={{ fontFamily:'Syne,sans-serif', fontSize:'1.2rem', color:'var(--text-primary)', marginBottom:'0.5rem' }}>\n              You're all caught up!\n            </h3>\n            <p style={{ color:'var(--text-secondary)', fontSize:'0.9rem' }}>No new notifications right now.</p>\n          </div>\n        ) : (\n          <div style={{ display:'flex', flexDirection:'column', gap:'0.8rem' }}>\n            {notifications.map((n, i) => {\n              const { icon, color, bg } = iconFor(n.type || '');\n              return (\n                <div\n                  key={i}\n                  className=\"glass-card\"\n                  style={{ padding:'1.2rem 1.5rem', display:'flex', alignItems:'flex-start', gap:'1rem', cursor: n.onClickPath ? 'pointer' : 'default' }}\n                  onClick={() => n.onClickPath && navigate(n.onClickPath)}\n                >\n                  <div style={{ width:42, height:42, borderRadius:12, background:bg, display:'flex', alignItems:'center', justifyContent:'center', fontSize:'1.2rem', flexShrink:0 }}>\n                    {icon}\n                  </div>\n                  <div style={{ flex:1 }}>\n                    <div style={{ fontSize:'0.9rem', color:'var(--text-primary)', marginBottom:'0.3rem', lineHeight:1.5 }}>\n                      {n.message}\n                    </div>\n                    {n.createdAt && (\n                      <div style={{ fontSize:'0.75rem', color:'var(--text-muted)' }}>\n                        {fromNow(n.createdAt)}\n                      </div>\n                    )}\n                  </div>\n                  {n.onClickPath && (\n                    <div style={{ fontSize:'0.8rem', color, fontWeight:500 }}>View ‚Üí</div>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n        )}\n      </main>\n    </div>\n  );\n};\n\nexport default Notifications;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}