{"ast":null,"code":"import axios from'axios';// ── Auth header on every request ──────────────────────────\naxios.interceptors.request.use(config=>{const token=localStorage.getItem('token');if(token)config.headers.Authorization=\"Bearer \".concat(token);return config;});// ── Redirect to login on 401 ──────────────────────────────\naxios.interceptors.response.use(res=>res,err=>{var _err$response;if(((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.status)===401){localStorage.removeItem('token');localStorage.removeItem('user');window.location.href='/login';}return Promise.reject(err);});// ── Simple in-memory GET cache (60s TTL) ──────────────────\nconst cache=new Map();const TTL=60000;// 1 minute\nexport const cachedGet=async url=>{const hit=cache.get(url);if(hit&&Date.now()-hit.ts<TTL)return hit.data;const res=await axios.get(url);cache.set(url,{data:res,ts:Date.now()});return res;};export const invalidateCache=urlPattern=>{for(const key of cache.keys()){if(key.includes(urlPattern))cache.delete(key);}};export default axios;","map":{"version":3,"names":["axios","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","concat","response","res","err","_err$response","status","removeItem","window","location","href","Promise","reject","cache","Map","TTL","cachedGet","url","hit","get","Date","now","ts","data","set","invalidateCache","urlPattern","key","keys","includes","delete"],"sources":["C:/Users/Dell/Downloads/docspot-appointment-booking/docspot-appointment-booking/frontend/src/utils/axiosConfig.js"],"sourcesContent":["import axios from 'axios';\n\n// ── Auth header on every request ──────────────────────────\naxios.interceptors.request.use((config) => {\n  const token = localStorage.getItem('token');\n  if (token) config.headers.Authorization = `Bearer ${token}`;\n  return config;\n});\n\n// ── Redirect to login on 401 ──────────────────────────────\naxios.interceptors.response.use(\n  res => res,\n  err => {\n    if (err.response?.status === 401) {\n      localStorage.removeItem('token');\n      localStorage.removeItem('user');\n      window.location.href = '/login';\n    }\n    return Promise.reject(err);\n  }\n);\n\n// ── Simple in-memory GET cache (60s TTL) ──────────────────\nconst cache = new Map();\nconst TTL   = 60_000; // 1 minute\n\nexport const cachedGet = async (url) => {\n  const hit = cache.get(url);\n  if (hit && Date.now() - hit.ts < TTL) return hit.data;\n\n  const res  = await axios.get(url);\n  cache.set(url, { data: res, ts: Date.now() });\n  return res;\n};\n\nexport const invalidateCache = (urlPattern) => {\n  for (const key of cache.keys()) {\n    if (key.includes(urlPattern)) cache.delete(key);\n  }\n};\n\nexport default axios;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB;AACAA,KAAK,CAACC,YAAY,CAACC,OAAO,CAACC,GAAG,CAAEC,MAAM,EAAK,CACzC,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAIF,KAAK,CAAED,MAAM,CAACI,OAAO,CAACC,aAAa,WAAAC,MAAA,CAAaL,KAAK,CAAE,CAC3D,MAAO,CAAAD,MAAM,CACf,CAAC,CAAC,CAEF;AACAJ,KAAK,CAACC,YAAY,CAACU,QAAQ,CAACR,GAAG,CAC7BS,GAAG,EAAIA,GAAG,CACVC,GAAG,EAAI,KAAAC,aAAA,CACL,GAAI,EAAAA,aAAA,CAAAD,GAAG,CAACF,QAAQ,UAAAG,aAAA,iBAAZA,aAAA,CAAcC,MAAM,IAAK,GAAG,CAAE,CAChCT,YAAY,CAACU,UAAU,CAAC,OAAO,CAAC,CAChCV,YAAY,CAACU,UAAU,CAAC,MAAM,CAAC,CAC/BC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,QAAQ,CACjC,CACA,MAAO,CAAAC,OAAO,CAACC,MAAM,CAACR,GAAG,CAAC,CAC5B,CACF,CAAC,CAED;AACA,KAAM,CAAAS,KAAK,CAAG,GAAI,CAAAC,GAAG,CAAC,CAAC,CACvB,KAAM,CAAAC,GAAG,CAAK,KAAM,CAAE;AAEtB,MAAO,MAAM,CAAAC,SAAS,CAAG,KAAO,CAAAC,GAAG,EAAK,CACtC,KAAM,CAAAC,GAAG,CAAGL,KAAK,CAACM,GAAG,CAACF,GAAG,CAAC,CAC1B,GAAIC,GAAG,EAAIE,IAAI,CAACC,GAAG,CAAC,CAAC,CAAGH,GAAG,CAACI,EAAE,CAAGP,GAAG,CAAE,MAAO,CAAAG,GAAG,CAACK,IAAI,CAErD,KAAM,CAAApB,GAAG,CAAI,KAAM,CAAAZ,KAAK,CAAC4B,GAAG,CAACF,GAAG,CAAC,CACjCJ,KAAK,CAACW,GAAG,CAACP,GAAG,CAAE,CAAEM,IAAI,CAAEpB,GAAG,CAAEmB,EAAE,CAAEF,IAAI,CAACC,GAAG,CAAC,CAAE,CAAC,CAAC,CAC7C,MAAO,CAAAlB,GAAG,CACZ,CAAC,CAED,MAAO,MAAM,CAAAsB,eAAe,CAAIC,UAAU,EAAK,CAC7C,IAAK,KAAM,CAAAC,GAAG,GAAI,CAAAd,KAAK,CAACe,IAAI,CAAC,CAAC,CAAE,CAC9B,GAAID,GAAG,CAACE,QAAQ,CAACH,UAAU,CAAC,CAAEb,KAAK,CAACiB,MAAM,CAACH,GAAG,CAAC,CACjD,CACF,CAAC,CAED,cAAe,CAAApC,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}