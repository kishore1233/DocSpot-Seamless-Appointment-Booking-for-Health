"use strict";(self.webpackChunkdocspot_frontend=self.webpackChunkdocspot_frontend||[]).push([[409],{409(e,a,t){t.r(a),t.d(a,{default:()=>d});var r=t(43),o=t(216),n=t(722),i=t(457),s=t(291),c=t(233),l=t(579);const d=()=>{const e=(0,o.Zp)(),a=JSON.parse(localStorage.getItem("user")||"null"),t="admin"===(null===a||void 0===a?void 0:a.type)?"admin":null!==a&&void 0!==a&&a.isdoctor?"doctor":"user",[d,h]=(0,r.useState)([]),[m,p]=(0,r.useState)(!0);(0,r.useEffect)(()=>{u()},[]);const u=async()=>{try{const e=localStorage.getItem("token"),a=await n.A.get("/api/user/notifications",{headers:{Authorization:"Bearer ".concat(e)}});a.data.success&&h(a.data.data||[])}catch(e){i.A.error("Failed to load notifications")}finally{p(!1)}};return(0,l.jsxs)("div",{className:"dashboard-layout",children:[(0,l.jsx)(c.A,{role:t,notifCount:d.length}),(0,l.jsxs)("main",{className:"dashboard-main",children:[(0,l.jsx)("div",{className:"dashboard-header",children:(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"dashboard-greeting",children:"Notifications \ud83d\udd14"}),(0,l.jsx)("div",{className:"dashboard-subline",children:"Stay updated on your appointments and requests"})]}),d.length>0&&(0,l.jsx)("button",{className:"btn-3d btn-secondary-3d",onClick:async()=>{try{const e=localStorage.getItem("token");await n.A.put("/api/user/notifications/mark-read",{},{headers:{Authorization:"Bearer ".concat(e)}}),h([]),i.A.success("All notifications cleared")}catch(e){i.A.error("Failed to clear notifications")}},children:"\u2713 Mark all as read"})]})}),m?(0,l.jsx)("div",{className:"loading-center",children:(0,l.jsx)("div",{className:"spinner-3d"})}):0===d.length?(0,l.jsxs)("div",{className:"glass-card",style:{padding:"4rem 2rem",textAlign:"center"},children:[(0,l.jsx)("div",{style:{fontSize:"3.5rem",marginBottom:"1rem"},children:"\ud83c\udf89"}),(0,l.jsx)("h3",{style:{fontFamily:"Syne,sans-serif",fontSize:"1.2rem",color:"var(--text-primary)",marginBottom:"0.5rem"},children:"You're all caught up!"}),(0,l.jsx)("p",{style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"No new notifications right now."})]}):(0,l.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem"},children:d.map((a,t)=>{const{icon:r,color:o,bg:n}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.includes("approved")?{icon:"\u2705",color:"var(--success)",bg:"rgba(16,185,129,0.10)"}:e.includes("rejected")?{icon:"\u274c",color:"var(--danger)",bg:"rgba(244,63,94,0.10)"}:e.includes("cancelled")?{icon:"\ud83d\udeab",color:"var(--warning)",bg:"rgba(245,158,11,0.10)"}:e.includes("new")?{icon:"\ud83d\udd14",color:"var(--primary)",bg:"rgba(14,165,233,0.10)"}:{icon:"\ud83d\udcac",color:"var(--accent)",bg:"rgba(167,139,250,0.10)"}}(a.type||"");return(0,l.jsxs)("div",{className:"glass-card",style:{padding:"1.2rem 1.5rem",display:"flex",alignItems:"flex-start",gap:"1rem",cursor:a.onClickPath?"pointer":"default"},onClick:()=>a.onClickPath&&e(a.onClickPath),children:[(0,l.jsx)("div",{style:{width:42,height:42,borderRadius:12,background:n,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem",flexShrink:0},children:r}),(0,l.jsxs)("div",{style:{flex:1},children:[(0,l.jsx)("div",{style:{fontSize:"0.9rem",color:"var(--text-primary)",marginBottom:"0.3rem",lineHeight:1.5},children:a.message}),a.createdAt&&(0,l.jsx)("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:(0,s.PI)(a.createdAt)})]}),a.onClickPath&&(0,l.jsx)("div",{style:{fontSize:"0.8rem",color:o,fontWeight:500},children:"View \u2192"})]},t)})})]})]})}},233(e,a,t){t.d(a,{A:()=>l});t(43);var r=t(216),o=t(579);const n=e=>{let{d:a}=e;return(0,o.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,o.jsx)("path",{d:a})})},i=[{path:"/user/dashboard",label:"Home",icon:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"},{path:"/user/appointments",label:"My Appointments",icon:"M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"},{path:"/user/notifications",label:"Notifications",icon:"M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9M13.73 21a2 2 0 01-3.46 0"},{path:"/user/apply-doctor",label:"Apply as Doctor",icon:"M16 21v-2a4 4 0 00-4-4H6a4 4 0 00-4 4v2M12 7a4 4 0 100 8 4 4 0 000-8z"},{path:"/user/profile",label:"My Profile",icon:"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2M12 11a4 4 0 100-8 4 4 0 000 8z"}],s=[{path:"/doctor/dashboard",label:"Dashboard",icon:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"},{path:"/doctor/appointments",label:"Appointments",icon:"M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"},{path:"/doctor/profile",label:"My Profile",icon:"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2M12 11a4 4 0 100-8 4 4 0 000 8z"},{path:"/doctor/notifications",label:"Notifications",icon:"M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9M13.73 21a2 2 0 01-3.46 0"}],c=[{path:"/admin/dashboard",label:"Overview",icon:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"},{path:"/admin/users",label:"Users",icon:"M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2M9 7a4 4 0 100 8 4 4 0 000-8z"},{path:"/admin/doctors",label:"Doctors",icon:"M16 21v-2a4 4 0 00-4-4H6a4 4 0 00-4 4v2M12 7a4 4 0 100 8 4 4 0 000-8zM22 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75"},{path:"/admin/appointments",label:"Appointments",icon:"M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"}],l=e=>{let{role:a="user",notifCount:t=0}=e;const l=(0,r.Zp)(),d=(0,r.zy)(),h="admin"===a?c:"doctor"===a?s:i;return(0,o.jsxs)("aside",{className:"sidebar-3d",children:[(0,o.jsx)("div",{className:"sidebar-logo",onClick:()=>l("/"),style:{cursor:"pointer"},children:"\u2b21 DocSpot"}),(0,o.jsx)("div",{className:"sidebar-section-title",children:"admin"===a?"Admin Panel":"doctor"===a?"Doctor Panel":"Patient Panel"}),(0,o.jsx)("nav",{style:{flex:1},children:h.map(e=>(0,o.jsxs)("div",{className:"sidebar-nav-item ".concat(d.pathname===e.path?"active":""),onClick:()=>l(e.path),children:[(0,o.jsx)(n,{d:e.icon}),(0,o.jsx)("span",{style:{flex:1},children:e.label}),"Notifications"===e.label&&t>0&&(0,o.jsx)("span",{style:{background:"var(--danger)",color:"#fff",borderRadius:"100px",fontSize:"0.65rem",padding:"0.1rem 0.45rem",fontWeight:700},children:t})]},e.path))}),(0,o.jsx)("div",{style:{borderTop:"1px solid var(--border)",paddingTop:"1rem",marginTop:"1rem"},children:(0,o.jsxs)("div",{className:"sidebar-nav-item",style:{color:"var(--danger)"},onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),l("/login")},children:[(0,o.jsx)(n,{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4M16 17l5-5-5-5M21 12H9"}),"Logout"]})})]})}},291(e,a,t){t.d(a,{IM:()=>n,PI:()=>o,Yq:()=>r});const r=e=>{if(!e)return"\u2014";const a=new Date(e);return isNaN(a)?e:a.toLocaleString("en-IN",{weekday:"short",month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})},o=e=>{if(!e)return"";const a=new Date(e);if(isNaN(a))return"";const t=Date.now()-a.getTime(),r=Math.abs(t),o=Math.floor(r/6e4),n=Math.floor(r/36e5),i=Math.floor(r/864e5);return o<1?"just now":o<60?"".concat(o," min").concat(o>1?"s":""," ago"):n<24?"".concat(n," hour").concat(n>1?"s":""," ago"):i<30?"".concat(i," day").concat(i>1?"s":""," ago"):(e=>{if(!e)return"\u2014";const a=new Date(e);return isNaN(a)?e:a.toLocaleDateString("en-IN",{month:"short",day:"numeric",year:"numeric"})})(e)},n=e=>{if(!e)return"\u2014";const a=new Date(e);return isNaN(a)?e:a.toLocaleString("en-IN",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}},457(e,a,t){t.d(a,{A:()=>i});let r=null;const o={success:{bg:"rgba(16,185,129,0.12)",border:"rgba(16,185,129,0.35)",color:"#10b981",icon:"\u2713"},error:{bg:"rgba(244,63,94,0.12)",border:"rgba(244,63,94,0.35)",color:"#f43f5e",icon:"\u2715"},info:{bg:"rgba(14,165,233,0.12)",border:"rgba(14,165,233,0.35)",color:"#0ea5e9",icon:"\u2139"},warning:{bg:"rgba(245,158,11,0.12)",border:"rgba(245,158,11,0.35)",color:"#f59e0b",icon:"\u26a0"}},n=function(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3;const n=(r||(r=document.createElement("div"),r.id="toast-root",Object.assign(r.style,{position:"fixed",top:"1.2rem",left:"50%",transform:"translateX(-50%)",zIndex:9999,display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",pointerEvents:"none"}),document.body.appendChild(r)),r),i=o[e]||o.info,s=document.createElement("div");Object.assign(s.style,{display:"flex",alignItems:"center",gap:"0.6rem",padding:"0.65rem 1.2rem",borderRadius:"100px",border:"1px solid ".concat(i.border),background:i.bg,color:i.color,fontSize:"0.88rem",fontWeight:"500",fontFamily:"DM Sans, sans-serif",backdropFilter:"blur(16px)",boxShadow:"0 4px 24px rgba(0,0,0,0.3)",whiteSpace:"nowrap",opacity:"0",transform:"translateY(-8px)",transition:"opacity 0.25s ease, transform 0.25s ease",pointerEvents:"auto"}),s.innerHTML='<span style="font-size:0.9rem">'.concat(i.icon,"</span><span>").concat(a,"</span>"),n.appendChild(s),requestAnimationFrame(()=>{s.style.opacity="1",s.style.transform="translateY(0)"}),setTimeout(()=>{s.style.opacity="0",s.style.transform="translateY(-8px)",setTimeout(()=>s.remove(),280)},t)},i={success:(e,a)=>n("success",e,a),error:(e,a)=>n("error",e,a),info:(e,a)=>n("info",e,a),warning:(e,a)=>n("warning",e,a)}}}]);
//# sourceMappingURL=409.83453a8e.chunk.js.map