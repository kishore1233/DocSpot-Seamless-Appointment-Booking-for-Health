"use strict";(self.webpackChunkdocspot_frontend=self.webpackChunkdocspot_frontend||[]).push([[784],{233(e,a,t){t.d(a,{A:()=>d});t(43);var n=t(216),r=t(579);const s=e=>{let{d:a}=e;return(0,r.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:a})})},i=[{path:"/user/dashboard",label:"Home",icon:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"},{path:"/user/appointments",label:"My Appointments",icon:"M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"},{path:"/user/notifications",label:"Notifications",icon:"M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9M13.73 21a2 2 0 01-3.46 0"},{path:"/user/apply-doctor",label:"Apply as Doctor",icon:"M16 21v-2a4 4 0 00-4-4H6a4 4 0 00-4 4v2M12 7a4 4 0 100 8 4 4 0 000-8z"},{path:"/user/profile",label:"My Profile",icon:"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2M12 11a4 4 0 100-8 4 4 0 000 8z"}],o=[{path:"/doctor/dashboard",label:"Dashboard",icon:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"},{path:"/doctor/appointments",label:"Appointments",icon:"M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"},{path:"/doctor/profile",label:"My Profile",icon:"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2M12 11a4 4 0 100-8 4 4 0 000 8z"},{path:"/doctor/notifications",label:"Notifications",icon:"M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9M13.73 21a2 2 0 01-3.46 0"}],l=[{path:"/admin/dashboard",label:"Overview",icon:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"},{path:"/admin/users",label:"Users",icon:"M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2M9 7a4 4 0 100 8 4 4 0 000-8z"},{path:"/admin/doctors",label:"Doctors",icon:"M16 21v-2a4 4 0 00-4-4H6a4 4 0 00-4 4v2M12 7a4 4 0 100 8 4 4 0 000-8zM22 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75"},{path:"/admin/appointments",label:"Appointments",icon:"M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"}],d=e=>{let{role:a="user",notifCount:t=0}=e;const d=(0,n.Zp)(),c=(0,n.zy)(),p="admin"===a?l:"doctor"===a?o:i;return(0,r.jsxs)("aside",{className:"sidebar-3d",children:[(0,r.jsx)("div",{className:"sidebar-logo",onClick:()=>d("/"),style:{cursor:"pointer"},children:"\u2b21 DocSpot"}),(0,r.jsx)("div",{className:"sidebar-section-title",children:"admin"===a?"Admin Panel":"doctor"===a?"Doctor Panel":"Patient Panel"}),(0,r.jsx)("nav",{style:{flex:1},children:p.map(e=>(0,r.jsxs)("div",{className:"sidebar-nav-item ".concat(c.pathname===e.path?"active":""),onClick:()=>d(e.path),children:[(0,r.jsx)(s,{d:e.icon}),(0,r.jsx)("span",{style:{flex:1},children:e.label}),"Notifications"===e.label&&t>0&&(0,r.jsx)("span",{style:{background:"var(--danger)",color:"#fff",borderRadius:"100px",fontSize:"0.65rem",padding:"0.1rem 0.45rem",fontWeight:700},children:t})]},e.path))}),(0,r.jsx)("div",{style:{borderTop:"1px solid var(--border)",paddingTop:"1rem",marginTop:"1rem"},children:(0,r.jsxs)("div",{className:"sidebar-nav-item",style:{color:"var(--danger)"},onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),d("/login")},children:[(0,r.jsx)(s,{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4M16 17l5-5-5-5M21 12H9"}),"Logout"]})})]})}},784(e,a,t){t.r(a),t.d(a,{default:()=>p});var n=t(555),r=t(43),s=t(216),i=t(722),o=t(457),l=t(291),d=t(233),c=t(579);const p=()=>{var e;const a=(0,s.Zp)(),t=JSON.parse(localStorage.getItem("user")||"{}"),[p,m]=(0,r.useState)(null),[h,f]=(0,r.useState)([]),[g,u]=(0,r.useState)(!0),[v,b]=(0,r.useState)(null);(0,r.useEffect)(()=>{x()},[]);const x=async()=>{try{const e=localStorage.getItem("token"),a={Authorization:"Bearer ".concat(e)},[t,n]=await Promise.all([i.A.get("/api/doctor/profile/me",{headers:a}),i.A.get("/api/doctor/appointments/all",{headers:a})]);t.data.success&&m(t.data.data),n.data.success&&f(n.data.data)}catch(e){o.A.error("Failed to load dashboard")}finally{u(!1)}},y=async(e,a)=>{b(e);try{const t=localStorage.getItem("token");(await i.A.put("/api/doctor/appointments/update-status",{appointmentId:e,status:a},{headers:{Authorization:"Bearer ".concat(t)}})).data.success&&(o.A.success("Appointment ".concat(a)),f(t=>t.map(t=>t._id===e?(0,n.A)((0,n.A)({},t),{},{status:a}):t)))}catch(t){o.A.error("Update failed")}finally{b(null)}};if(!t.isdoctor)return(0,c.jsxs)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"1rem"},children:[(0,c.jsx)("div",{style:{fontSize:"3rem"},children:"\u23f3"}),(0,c.jsx)("div",{style:{fontFamily:"Syne,sans-serif",color:"var(--text-primary)",fontSize:"1.2rem"},children:"Awaiting admin approval"}),(0,c.jsx)("p",{style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Your doctor application is under review."}),(0,c.jsx)("button",{className:"btn-3d btn-secondary-3d",onClick:()=>a("/user/dashboard"),children:"\u2190 Back to Dashboard"})]});const j={total:h.length,pending:h.filter(e=>"pending"===e.status).length,approved:h.filter(e=>"approved"===e.status).length,completed:h.filter(e=>"completed"===e.status).length};return(0,c.jsxs)("div",{className:"dashboard-layout",children:[(0,c.jsx)(d.A,{role:"doctor"}),(0,c.jsxs)("main",{className:"dashboard-main",children:[(0,c.jsx)("div",{className:"dashboard-header",children:(0,c.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"dashboard-greeting",children:["Welcome, Dr. ",null===(e=t.name)||void 0===e?void 0:e.split(" ")[0]," \ud83d\udc68\u200d\u2695\ufe0f"]}),(0,c.jsx)("div",{className:"dashboard-subline",children:"Manage your schedule and appointments"})]}),(0,c.jsx)("button",{className:"btn-3d btn-primary-3d",onClick:()=>a("/doctor/profile"),children:"Edit Profile"})]})}),p&&(0,c.jsxs)("div",{className:"glass-card",style:{padding:"1.2rem 1.6rem",marginBottom:"2rem",display:"flex",alignItems:"center",gap:"1.5rem",flexWrap:"wrap"},children:[(0,c.jsx)("div",{style:{width:48,height:48,borderRadius:14,background:"linear-gradient(135deg,var(--primary),var(--accent))",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"Syne,sans-serif",fontWeight:700,color:"#fff",fontSize:"1.1rem"},children:p.fullname.split(" ").map(e=>e[0]).join("").slice(0,2).toUpperCase()}),(0,c.jsxs)("div",{style:{flex:1},children:[(0,c.jsxs)("div",{style:{fontFamily:"Syne,sans-serif",fontWeight:700,color:"var(--text-primary)"},children:["Dr. ",p.fullname]}),(0,c.jsx)("div",{style:{fontSize:"0.78rem",color:"var(--primary)",textTransform:"uppercase",letterSpacing:"0.06em"},children:p.specialization})]}),[{label:"Timings",value:p.timings},{label:"Fees",value:"\u20b9".concat(p.fees)},{label:"Exp.",value:"".concat(p.experience," yrs")}].map(e=>(0,c.jsxs)("div",{style:{textAlign:"center",padding:"0 1rem",borderLeft:"1px solid var(--border)"},children:[(0,c.jsx)("div",{style:{fontFamily:"Syne,sans-serif",fontWeight:700,fontSize:"1rem",color:"var(--text-primary)"},children:e.value}),(0,c.jsx)("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em"},children:e.label})]},e.label))]}),(0,c.jsx)("div",{className:"stats-row",children:[{icon:"\ud83d\udccb",val:j.total,label:"Total",cls:"blue"},{icon:"\u23f3",val:j.pending,label:"Pending",cls:"purple"},{icon:"\u2705",val:j.approved,label:"Approved",cls:"teal"},{icon:"\ud83c\udfc1",val:j.completed,label:"Completed",cls:"pink"}].map(e=>(0,c.jsxs)("div",{className:"stat-card-3d",children:[(0,c.jsx)("div",{className:"stat-card-icon ".concat(e.cls),children:e.icon}),(0,c.jsx)("div",{className:"stat-card-val",children:e.val}),(0,c.jsx)("div",{className:"stat-card-lbl",children:e.label})]},e.label))}),(0,c.jsx)("div",{className:"section-header-3d",style:{marginTop:"0.5rem"},children:(0,c.jsx)("h2",{className:"section-title-3d",children:"Patient Appointments"})}),g?(0,c.jsx)("div",{className:"loading-center",children:(0,c.jsx)("div",{className:"spinner-3d"})}):0===h.length?(0,c.jsxs)("div",{className:"glass-card",style:{padding:"4rem 2rem",textAlign:"center"},children:[(0,c.jsx)("div",{style:{fontSize:"3.5rem",marginBottom:"1rem"},children:"\ud83d\udced"}),(0,c.jsx)("h3",{style:{fontFamily:"Syne,sans-serif",color:"var(--text-primary)",fontSize:"1.1rem",marginBottom:"0.4rem"},children:"No appointments yet"}),(0,c.jsx)("p",{style:{color:"var(--text-secondary)",fontSize:"0.88rem"},children:"Patients will appear here once they book with you."})]}):(0,c.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem"},children:h.map(e=>{var a,t;const n=(null===(a=e.userInfo)||void 0===a?void 0:a.name)||"Patient",r=isNaN(new Date(e.date))?e.date:(0,l.Yq)(e.date);return(0,c.jsxs)("div",{className:"glass-card",style:{padding:"1.4rem 1.6rem",display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[(0,c.jsx)("div",{style:{width:44,height:44,borderRadius:12,background:"rgba(167,139,250,0.2)",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"Syne,sans-serif",fontWeight:700,color:"var(--accent)",fontSize:"1rem",flexShrink:0},children:n.split(" ").map(e=>e[0]).join("").slice(0,2).toUpperCase()}),(0,c.jsxs)("div",{style:{flex:1,minWidth:180},children:[(0,c.jsx)("div",{style:{fontFamily:"Syne,sans-serif",fontWeight:700,color:"var(--text-primary)",marginBottom:"0.2rem"},children:n}),(0,c.jsxs)("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",display:"flex",gap:"1rem",flexWrap:"wrap"},children:[(0,c.jsxs)("span",{children:["\ud83d\udcc5 ",r]}),(null===(t=e.userInfo)||void 0===t?void 0:t.phone)&&(0,c.jsxs)("span",{children:["\ud83d\udcde ",e.userInfo.phone]})]}),e.document&&(0,c.jsxs)("div",{style:{fontSize:"0.75rem",color:"var(--accent)",marginTop:"0.3rem"},children:["\ud83d\udcce Note: ",e.document.slice(0,80),e.document.length>80?"\u2026":""]})]}),(0,c.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.8rem",flexShrink:0},children:[(s=e.status,(0,c.jsx)("span",{className:"badge-3d ".concat({pending:"badge-pending",approved:"badge-approved",cancelled:"badge-cancelled",completed:"badge-approved"}[s]||"badge-pending"),children:s})),"pending"===e.status&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{className:"btn-3d btn-success-3d btn-sm-3d",disabled:v===e._id,onClick:()=>y(e._id,"approved"),children:v===e._id?"\u2026":"\u2713 Approve"}),(0,c.jsx)("button",{className:"btn-3d btn-danger-3d btn-sm-3d",disabled:v===e._id,onClick:()=>y(e._id,"cancelled"),children:"\u2715 Reject"})]}),"approved"===e.status&&(0,c.jsx)("button",{className:"btn-3d btn-secondary-3d btn-sm-3d",disabled:v===e._id,onClick:()=>y(e._id,"completed"),children:"\ud83c\udfc1 Complete"})]})]},e._id);var s})})]})]})}},291(e,a,t){t.d(a,{IM:()=>s,PI:()=>r,Yq:()=>n});const n=e=>{if(!e)return"\u2014";const a=new Date(e);return isNaN(a)?e:a.toLocaleString("en-IN",{weekday:"short",month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})},r=e=>{if(!e)return"";const a=new Date(e);if(isNaN(a))return"";const t=Date.now()-a.getTime(),n=Math.abs(t),r=Math.floor(n/6e4),s=Math.floor(n/36e5),i=Math.floor(n/864e5);return r<1?"just now":r<60?"".concat(r," min").concat(r>1?"s":""," ago"):s<24?"".concat(s," hour").concat(s>1?"s":""," ago"):i<30?"".concat(i," day").concat(i>1?"s":""," ago"):(e=>{if(!e)return"\u2014";const a=new Date(e);return isNaN(a)?e:a.toLocaleDateString("en-IN",{month:"short",day:"numeric",year:"numeric"})})(e)},s=e=>{if(!e)return"\u2014";const a=new Date(e);return isNaN(a)?e:a.toLocaleString("en-IN",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}},457(e,a,t){t.d(a,{A:()=>i});let n=null;const r={success:{bg:"rgba(16,185,129,0.12)",border:"rgba(16,185,129,0.35)",color:"#10b981",icon:"\u2713"},error:{bg:"rgba(244,63,94,0.12)",border:"rgba(244,63,94,0.35)",color:"#f43f5e",icon:"\u2715"},info:{bg:"rgba(14,165,233,0.12)",border:"rgba(14,165,233,0.35)",color:"#0ea5e9",icon:"\u2139"},warning:{bg:"rgba(245,158,11,0.12)",border:"rgba(245,158,11,0.35)",color:"#f59e0b",icon:"\u26a0"}},s=function(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3;const s=(n||(n=document.createElement("div"),n.id="toast-root",Object.assign(n.style,{position:"fixed",top:"1.2rem",left:"50%",transform:"translateX(-50%)",zIndex:9999,display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",pointerEvents:"none"}),document.body.appendChild(n)),n),i=r[e]||r.info,o=document.createElement("div");Object.assign(o.style,{display:"flex",alignItems:"center",gap:"0.6rem",padding:"0.65rem 1.2rem",borderRadius:"100px",border:"1px solid ".concat(i.border),background:i.bg,color:i.color,fontSize:"0.88rem",fontWeight:"500",fontFamily:"DM Sans, sans-serif",backdropFilter:"blur(16px)",boxShadow:"0 4px 24px rgba(0,0,0,0.3)",whiteSpace:"nowrap",opacity:"0",transform:"translateY(-8px)",transition:"opacity 0.25s ease, transform 0.25s ease",pointerEvents:"auto"}),o.innerHTML='<span style="font-size:0.9rem">'.concat(i.icon,"</span><span>").concat(a,"</span>"),s.appendChild(o),requestAnimationFrame(()=>{o.style.opacity="1",o.style.transform="translateY(0)"}),setTimeout(()=>{o.style.opacity="0",o.style.transform="translateY(-8px)",setTimeout(()=>o.remove(),280)},t)},i={success:(e,a)=>s("success",e,a),error:(e,a)=>s("error",e,a),info:(e,a)=>s("info",e,a),warning:(e,a)=>s("warning",e,a)}}}]);
//# sourceMappingURL=784.6a966f86.chunk.js.map