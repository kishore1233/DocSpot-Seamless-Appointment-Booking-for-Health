"use strict";(self.webpackChunkdocspot_frontend=self.webpackChunkdocspot_frontend||[]).push([[584],{233(e,a,t){t.d(a,{A:()=>d});t(43);var n=t(216),r=t(579);const s=e=>{let{d:a}=e;return(0,r.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:a})})},i=[{path:"/user/dashboard",label:"Home",icon:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"},{path:"/user/appointments",label:"My Appointments",icon:"M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"},{path:"/user/notifications",label:"Notifications",icon:"M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9M13.73 21a2 2 0 01-3.46 0"},{path:"/user/apply-doctor",label:"Apply as Doctor",icon:"M16 21v-2a4 4 0 00-4-4H6a4 4 0 00-4 4v2M12 7a4 4 0 100 8 4 4 0 000-8z"},{path:"/user/profile",label:"My Profile",icon:"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2M12 11a4 4 0 100-8 4 4 0 000 8z"}],o=[{path:"/doctor/dashboard",label:"Dashboard",icon:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"},{path:"/doctor/appointments",label:"Appointments",icon:"M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"},{path:"/doctor/profile",label:"My Profile",icon:"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2M12 11a4 4 0 100-8 4 4 0 000 8z"},{path:"/doctor/notifications",label:"Notifications",icon:"M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9M13.73 21a2 2 0 01-3.46 0"}],l=[{path:"/admin/dashboard",label:"Overview",icon:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"},{path:"/admin/users",label:"Users",icon:"M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2M9 7a4 4 0 100 8 4 4 0 000-8z"},{path:"/admin/doctors",label:"Doctors",icon:"M16 21v-2a4 4 0 00-4-4H6a4 4 0 00-4 4v2M12 7a4 4 0 100 8 4 4 0 000-8zM22 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75"},{path:"/admin/appointments",label:"Appointments",icon:"M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"}],d=e=>{let{role:a="user",notifCount:t=0}=e;const d=(0,n.Zp)(),c=(0,n.zy)(),m="admin"===a?l:"doctor"===a?o:i;return(0,r.jsxs)("aside",{className:"sidebar-3d",children:[(0,r.jsx)("div",{className:"sidebar-logo",onClick:()=>d("/"),style:{cursor:"pointer"},children:"\u2b21 DocSpot"}),(0,r.jsx)("div",{className:"sidebar-section-title",children:"admin"===a?"Admin Panel":"doctor"===a?"Doctor Panel":"Patient Panel"}),(0,r.jsx)("nav",{style:{flex:1},children:m.map(e=>(0,r.jsxs)("div",{className:"sidebar-nav-item ".concat(c.pathname===e.path?"active":""),onClick:()=>d(e.path),children:[(0,r.jsx)(s,{d:e.icon}),(0,r.jsx)("span",{style:{flex:1},children:e.label}),"Notifications"===e.label&&t>0&&(0,r.jsx)("span",{style:{background:"var(--danger)",color:"#fff",borderRadius:"100px",fontSize:"0.65rem",padding:"0.1rem 0.45rem",fontWeight:700},children:t})]},e.path))}),(0,r.jsx)("div",{style:{borderTop:"1px solid var(--border)",paddingTop:"1rem",marginTop:"1rem"},children:(0,r.jsxs)("div",{className:"sidebar-nav-item",style:{color:"var(--danger)"},onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),d("/login")},children:[(0,r.jsx)(s,{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4M16 17l5-5-5-5M21 12H9"}),"Logout"]})})]})}},584(e,a,t){t.r(a),t.d(a,{default:()=>c});var n=t(43),r=t(216),s=t(233),i=t(722),o=t(457),l=t(291),d=t(579);const c=()=>{const e=(0,r.Zp)(),[a,t]=(0,n.useState)([]),[c,m]=(0,n.useState)(!0),[p,h]=(0,n.useState)(null);(0,n.useEffect)(()=>{g()},[]);const g=async()=>{try{const e=localStorage.getItem("token"),a=await i.A.get("/api/user/appointments",{headers:{Authorization:"Bearer ".concat(e)}});a.data.success&&t(a.data.data)}catch(e){o.A.error("Failed to load appointments")}finally{m(!1)}},v={total:a.length,pending:a.filter(e=>"pending"===e.status).length,approved:a.filter(e=>"approved"===e.status).length,cancelled:a.filter(e=>"cancelled"===e.status).length};return(0,d.jsxs)("div",{className:"dashboard-layout",children:[(0,d.jsx)(s.A,{role:"user"}),(0,d.jsxs)("main",{className:"dashboard-main",children:[(0,d.jsx)("div",{className:"dashboard-header",children:(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"dashboard-greeting",children:"My Appointments \ud83d\udcc5"}),(0,d.jsx)("div",{className:"dashboard-subline",children:"Track and manage all your bookings"})]}),(0,d.jsx)("button",{className:"btn-3d btn-primary-3d",onClick:()=>e("/user/dashboard"),children:"+ Book New Doctor"})]})}),(0,d.jsxs)("div",{className:"stats-row",children:[(0,d.jsxs)("div",{className:"stat-card-3d",children:[(0,d.jsx)("div",{className:"stat-card-icon blue",children:"\ud83d\udccb"}),(0,d.jsx)("div",{className:"stat-card-val",children:v.total}),(0,d.jsx)("div",{className:"stat-card-lbl",children:"Total Bookings"})]}),(0,d.jsxs)("div",{className:"stat-card-3d",children:[(0,d.jsx)("div",{className:"stat-card-icon purple",children:"\u23f3"}),(0,d.jsx)("div",{className:"stat-card-val",children:v.pending}),(0,d.jsx)("div",{className:"stat-card-lbl",children:"Pending"})]}),(0,d.jsxs)("div",{className:"stat-card-3d",children:[(0,d.jsx)("div",{className:"stat-card-icon teal",children:"\u2705"}),(0,d.jsx)("div",{className:"stat-card-val",children:v.approved}),(0,d.jsx)("div",{className:"stat-card-lbl",children:"Approved"})]}),(0,d.jsxs)("div",{className:"stat-card-3d",children:[(0,d.jsx)("div",{className:"stat-card-icon pink",children:"\u274c"}),(0,d.jsx)("div",{className:"stat-card-val",children:v.cancelled}),(0,d.jsx)("div",{className:"stat-card-lbl",children:"Cancelled"})]})]}),(0,d.jsxs)("div",{className:"section-header-3d",children:[(0,d.jsx)("h2",{className:"section-title-3d",children:"Booking History"}),(0,d.jsxs)("span",{style:{fontSize:"0.82rem",color:"var(--text-muted)"},children:[v.total," appointment",1!==v.total?"s":""]})]}),c?(0,d.jsx)("div",{className:"loading-center",children:(0,d.jsx)("div",{className:"spinner-3d"})}):0===a.length?(0,d.jsxs)("div",{className:"glass-card",style:{padding:"4rem 2rem",textAlign:"center"},children:[(0,d.jsx)("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:"\ud83d\udced"}),(0,d.jsx)("h3",{style:{fontFamily:"Syne, sans-serif",fontSize:"1.3rem",color:"var(--text-primary)",marginBottom:"0.5rem"},children:"No appointments yet"}),(0,d.jsx)("p",{style:{color:"var(--text-secondary)",fontSize:"0.9rem",marginBottom:"1.5rem"},children:"You haven't booked any appointments. Browse our doctors and schedule one!"}),(0,d.jsx)("button",{className:"btn-3d btn-primary-3d",onClick:()=>e("/user/dashboard"),children:"Browse Doctors \u2192"})]}):(0,d.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1.2rem"},children:a.map(e=>{var a,t,n,r;const s=(null===(a=e.doctorInfo)||void 0===a?void 0:a.fullname)||"Unknown Doctor",c=s.split(" ").map(e=>e[0]).join("").slice(0,2).toUpperCase(),m=(null===(t=e.doctorInfo)||void 0===t?void 0:t.specialization)||"",v=(null===(n=e.doctorInfo)||void 0===n?void 0:n.fees)||"",x=isNaN(new Date(e.date))?e.date:(0,l.Yq)(e.date);return(0,d.jsxs)("div",{className:"glass-card",style:{padding:"1.6rem",position:"relative",overflow:"hidden"},children:[(0,d.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,height:3,background:"approved"===e.status?"linear-gradient(90deg,var(--success),var(--teal))":"pending"===e.status?"linear-gradient(90deg,var(--warning),#f97316)":"cancelled"===e.status?"linear-gradient(90deg,var(--danger),#be123c)":"linear-gradient(90deg,var(--primary),var(--accent))"}}),(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.9rem",marginBottom:"1.1rem"},children:[(0,d.jsx)("div",{style:{width:46,height:46,borderRadius:12,flexShrink:0,background:"linear-gradient(135deg,var(--primary),var(--accent))",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"Syne, sans-serif",fontWeight:700,color:"#fff",fontSize:"1rem",boxShadow:"0 4px 16px rgba(14,165,233,0.3)"},children:c}),(0,d.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,d.jsxs)("div",{style:{fontFamily:"Syne, sans-serif",fontWeight:700,color:"var(--text-primary)",fontSize:"0.95rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:["Dr. ",s]}),m&&(0,d.jsx)("div",{style:{fontSize:"0.72rem",color:"var(--primary)",textTransform:"uppercase",letterSpacing:"0.06em",marginTop:2},children:m})]}),(u=e.status,(0,d.jsx)("span",{className:"badge-3d ".concat({pending:"badge-pending",approved:"badge-approved",cancelled:"badge-cancelled",completed:"badge-approved"}[u]||"badge-pending"),children:u}))]}),(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.45rem",marginBottom:"1.1rem"},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.83rem",color:"var(--text-secondary)"},children:[(0,d.jsx)("span",{style:{color:"var(--text-muted)",width:16,textAlign:"center"},children:"\ud83d\udcc5"}),x]}),v&&(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.83rem",color:"var(--text-secondary)"},children:[(0,d.jsx)("span",{style:{color:"var(--text-muted)",width:16,textAlign:"center"},children:"\ud83d\udcb0"}),(0,d.jsxs)("span",{style:{color:"var(--teal)",fontWeight:600},children:["\u20b9",v]}),(0,d.jsx)("span",{style:{color:"var(--text-muted)"},children:"consultation fee"})]}),(null===(r=e.doctorInfo)||void 0===r?void 0:r.address)&&(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.83rem",color:"var(--text-secondary)"},children:[(0,d.jsx)("span",{style:{color:"var(--text-muted)",width:16,textAlign:"center"},children:"\ud83d\udccd"}),e.doctorInfo.address]}),(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.75rem",color:"var(--text-muted)",marginTop:2},children:[(0,d.jsx)("span",{style:{width:16,textAlign:"center"},children:"\ud83c\udd94"}),(0,d.jsx)("span",{style:{fontFamily:"monospace"},children:e._id})]})]}),e.document&&(0,d.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",background:"rgba(167,139,250,0.08)",border:"1px solid rgba(167,139,250,0.2)",borderRadius:8,padding:"0.4rem 0.7rem",marginBottom:"1rem",fontSize:"0.75rem",color:"var(--accent)"},children:"\ud83d\udcce Document attached"}),("pending"===e.status||"approved"===e.status)&&(0,d.jsx)("button",{className:"btn-3d btn-danger-3d",style:{width:"100%",justifyContent:"center",fontSize:"0.85rem",padding:"0.6rem",opacity:p===e._id?.6:1},disabled:p===e._id,onClick:()=>(async e=>{h(e);try{const a=localStorage.getItem("token");(await i.A.put("/api/user/appointments/cancel/".concat(e),{},{headers:{Authorization:"Bearer ".concat(a)}})).data.success&&(o.A.success("Appointment cancelled"),g())}catch(a){o.A.error("Failed to cancel appointment")}finally{h(null)}})(e._id),children:p===e._id?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:"spinner-3d",style:{width:14,height:14,borderWidth:2}})," Cancelling\u2026"]}):"\u2715 Cancel Appointment"}),"cancelled"===e.status&&(0,d.jsx)("div",{style:{textAlign:"center",fontSize:"0.8rem",color:"var(--text-muted)",padding:"0.4rem"},children:"This appointment was cancelled"}),"completed"===e.status&&(0,d.jsx)("div",{style:{textAlign:"center",fontSize:"0.8rem",color:"var(--success)",padding:"0.4rem"},children:"\u2713 Consultation completed"})]},e._id);var u})})]})]})}},291(e,a,t){t.d(a,{IM:()=>s,PI:()=>r,Yq:()=>n});const n=e=>{if(!e)return"\u2014";const a=new Date(e);return isNaN(a)?e:a.toLocaleString("en-IN",{weekday:"short",month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})},r=e=>{if(!e)return"";const a=new Date(e);if(isNaN(a))return"";const t=Date.now()-a.getTime(),n=Math.abs(t),r=Math.floor(n/6e4),s=Math.floor(n/36e5),i=Math.floor(n/864e5);return r<1?"just now":r<60?"".concat(r," min").concat(r>1?"s":""," ago"):s<24?"".concat(s," hour").concat(s>1?"s":""," ago"):i<30?"".concat(i," day").concat(i>1?"s":""," ago"):(e=>{if(!e)return"\u2014";const a=new Date(e);return isNaN(a)?e:a.toLocaleDateString("en-IN",{month:"short",day:"numeric",year:"numeric"})})(e)},s=e=>{if(!e)return"\u2014";const a=new Date(e);return isNaN(a)?e:a.toLocaleString("en-IN",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}},457(e,a,t){t.d(a,{A:()=>i});let n=null;const r={success:{bg:"rgba(16,185,129,0.12)",border:"rgba(16,185,129,0.35)",color:"#10b981",icon:"\u2713"},error:{bg:"rgba(244,63,94,0.12)",border:"rgba(244,63,94,0.35)",color:"#f43f5e",icon:"\u2715"},info:{bg:"rgba(14,165,233,0.12)",border:"rgba(14,165,233,0.35)",color:"#0ea5e9",icon:"\u2139"},warning:{bg:"rgba(245,158,11,0.12)",border:"rgba(245,158,11,0.35)",color:"#f59e0b",icon:"\u26a0"}},s=function(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3;const s=(n||(n=document.createElement("div"),n.id="toast-root",Object.assign(n.style,{position:"fixed",top:"1.2rem",left:"50%",transform:"translateX(-50%)",zIndex:9999,display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",pointerEvents:"none"}),document.body.appendChild(n)),n),i=r[e]||r.info,o=document.createElement("div");Object.assign(o.style,{display:"flex",alignItems:"center",gap:"0.6rem",padding:"0.65rem 1.2rem",borderRadius:"100px",border:"1px solid ".concat(i.border),background:i.bg,color:i.color,fontSize:"0.88rem",fontWeight:"500",fontFamily:"DM Sans, sans-serif",backdropFilter:"blur(16px)",boxShadow:"0 4px 24px rgba(0,0,0,0.3)",whiteSpace:"nowrap",opacity:"0",transform:"translateY(-8px)",transition:"opacity 0.25s ease, transform 0.25s ease",pointerEvents:"auto"}),o.innerHTML='<span style="font-size:0.9rem">'.concat(i.icon,"</span><span>").concat(a,"</span>"),s.appendChild(o),requestAnimationFrame(()=>{o.style.opacity="1",o.style.transform="translateY(0)"}),setTimeout(()=>{o.style.opacity="0",o.style.transform="translateY(-8px)",setTimeout(()=>o.remove(),280)},t)},i={success:(e,a)=>s("success",e,a),error:(e,a)=>s("error",e,a),info:(e,a)=>s("info",e,a),warning:(e,a)=>s("warning",e,a)}}}]);
//# sourceMappingURL=584.0512565f.chunk.js.map